<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Model Economy 1</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../css/style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Model Economy 1</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#the-basics">The basics</a></li>
<li><a href="#deciding-what-to-produce">Deciding what to produce</a></li>
<li><a href="#consumption-goals-and-burgers">Consumption goals and burgers</a></li>
<li><a href="#the-market-matching-trades">The market: Matching trades</a></li>
<li><a href="#the-market-price-adjustment">The market: Price adjustment</a></li>
<li><a href="#the-api">The API</a></li>
</ul>
</nav>
<p>This model economy is based on Conrad Barski’s <a href="https://github.com/drcode/EconIsle">EconIsle</a>.</p>
<h1 id="the-basics">The basics</h1>
<p>The model has:</p>
<ul>
<li><strong>Agents</strong>: individuals who have
<ul>
<li><em>desires</em>, some goal, some gauge of ‘satisfaction’ or ‘happiness’ - here expressed in number of burgers, a view not dissimilar to my own.</li>
<li>have the ability to <em>produce</em>, with differing capabilities, resources, and in effect act to maximize their productivity.</li>
<li><em>possessions</em>, though only of inventory, not of capital, and with the exception of money, the current simulation doesn’t allow for creation of surplus.</li>
<li>The ability to <em>trade</em> on…</li>
</ul></li>
<li>A <strong>Marketplace</strong> where goods can be exchanged, and a price mechanism for adjusting prices in response to supply and demand. It works by sellers placing ‘sell’ orders (which all have the same price) and buyers meeting them.</li>
</ul>
<p>The sequence of events in this model is:</p>
<ol type="1">
<li>Agents decide what to produce during the day</li>
<li>They produce resources</li>
<li>They decide how much of the produced resource to sell on the market, and how much for</li>
<li>They decide on their ‘consumption goals’</li>
<li>They go to market and buy things to meet those consumption goals</li>
<li>They consume</li>
</ol>
<p>Or more broadly, 3 phases: produce, trade, consume.</p>
<h1 id="deciding-what-to-produce">Deciding what to produce</h1>
<p>Assume there are 4 resources, against taken from Barski’s model: bread, mammoth, ketchup and lettuce. Each has a ‘difficulty’ associated with farming it. The lower the number, the harder it is to farm.</p>
<p>Every agent can produce any resource, but the number of units of a resource each agent can produce varies. For example, agent 1 might be able to produce 5 units of mammoth per day, another can produce only 3.</p>
<p>In this circumstance, how does an agent decide what to produce on a given day? The ‘optimal’ answer is whatever will give them the most money if they sell it on the open market. So if mammoth has a price of $400, and they can produce 3 mammoth, the value is $1200. If the price of bread is $200 but the agent can produce 7, that’s $1400, so the agent should produce bread.</p>
<p>The general idea is that the agent has a concept of ‘value’ that they are trying to maximize, and can look at the state of the world to figure out what action maximizes that value.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb1-1" title="1">(production-strategy state) =&gt; <span class="at">:bread</span></a></code></pre></div>
<h1 id="consumption-goals-and-burgers">Consumption goals and burgers</h1>
<p>The production decision uses ‘money’ as a value measure. While this is convenient, in this model money is only a proximate value. The real goal of the agents is something else: to produce burgers. Money is just a means to that end.</p>
<p>A burger is produced by combining one of each of the four resources. An agent therefore needs to be able to figure out how many burgers they can produce, and buy the necessary ingredients on the open market.</p>
<p>The agent needs to be able to generate actions (market buys/sells) based on a strategy that they have.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb2-1" title="1">(generate-actions state strategy) =&gt; [[<span class="at">:buy</span> <span class="at">:mammoth</span> <span class="dv">5</span>], ,,,]</a></code></pre></div>
<p>Our initial strategy will be:</p>
<ol type="1">
<li>The agent figures out, based on their current money, inventory, and resource prices, how many burgers they could make if they were to buy resources on the open market</li>
<li>They calculate their surplus: their remaining resources if they were to make the burgers from step 1 - e.g. If they have 5 lettuce and plan to make 3 burgers, they will have a surplus of 2 unused lettuce</li>
<li>They create buy orders for the former, and sell orders from the latter.</li>
</ol>
<h1 id="the-market-matching-trades">The market: Matching trades</h1>
<p>Key to this is the functioning of the marketplace.</p>
<p>This model makes the simplification that there is a single daily price for each resource, and that any buy and sell transactions are made at that price.</p>
<p>The market then goes through a process of…reconciliation? There must be a better word for it than that. Buys are matched against sells.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb3-1" title="1">(match-trades trades) =&gt; {<span class="dv">0</span> {<span class="at">:mammoth</span> <span class="dv">3</span>, ,,,},,,}</a></code></pre></div>
<p>The return value here is the resources that each agent (the key-value) ends up with after matching.</p>
<h1 id="the-market-price-adjustment">The market: Price adjustment</h1>
<h1 id="the-api">The API</h1>
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb4-1" title="1">(turn state)</a>
<a class="sourceLine" id="cb4-2" title="2"></a>
<a class="sourceLine" id="cb4-3" title="3">(<span class="bu">defn</span><span class="fu"> turn </span>[state]</a>
<a class="sourceLine" id="cb4-4" title="4">  (<span class="kw">-&gt;</span> state</a>
<a class="sourceLine" id="cb4-5" title="5">      produce</a>
<a class="sourceLine" id="cb4-6" title="6">      trade</a>
<a class="sourceLine" id="cb4-7" title="7">      consume))</a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9">(<span class="bu">defn</span><span class="fu"> produce </span>[state]</a>
<a class="sourceLine" id="cb4-10" title="10">  (<span class="kw">reduce</span> agent-produce state (<span class="kw">range</span> <span class="dv">0</span> agent-quant)))</a>
<a class="sourceLine" id="cb4-11" title="11"></a>
<a class="sourceLine" id="cb4-12" title="12">(<span class="bu">defn</span><span class="fu"> agent-produce </span>[state agent-id]</a>
<a class="sourceLine" id="cb4-13" title="13">  (<span class="kw">let</span> [<span class="kw">agent</span> (<span class="kw">get-in</span> state [<span class="at">:agents</span> agent-id])</a>
<a class="sourceLine" id="cb4-14" title="14">        resouce ((<span class="at">:production-strategy</span> <span class="kw">agent</span>) state)</a>
<a class="sourceLine" id="cb4-15" title="15">        production (<span class="kw">get-in</span> <span class="kw">agent</span> [<span class="at">:skills</span> resource])]</a>
<a class="sourceLine" id="cb4-16" title="16">    (<span class="kw">assoc-in</span> state [<span class="at">:agents</span> agent-id <span class="at">:inventory</span> resource] production)))</a>
<a class="sourceLine" id="cb4-17" title="17"></a>
<a class="sourceLine" id="cb4-18" title="18">(<span class="bu">defn</span><span class="fu"> trade </span>[state]</a>
<a class="sourceLine" id="cb4-19" title="19">  (<span class="kw">let</span> [trades (<span class="kw">mapcat</span> #(actions state <span class="va">%</span>) </a></code></pre></div>
</body>
</html>
