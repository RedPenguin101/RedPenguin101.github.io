<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Category theory</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Category theory</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_a_first_level_of_abstraction">A first level of abstraction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When we work in the real world, we are dealing with real, concrete things. We deal with collections of those things, and we perform operations on those things. We can count piles of rocks, we can connect cars on a train together, we can make a bag of mini-bags of candy into a bag of candies by emptying the smaller bags into the larger bag.</p>
</div>
<div class="paragraph">
<p>After we&#8217;ve worked with concrete things for a while, we can elevate our thinking by noticing that these things have similar properties. An apple is not the same thing as a rock, but counting a pile of apples is the same as counting a pile of rocks. We can <em>count</em> anything that is a <em>collection</em> of discrete things. We are now dealing with abstract properties, not concrete things. This is the first level of abstraction.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at a few examples.</p>
</div>
<div class="sect2">
<h3 id="_level_one_abstraction_addition_over_countable_collections">Level One Abstraction: Addition over Countable Collections</h3>
<div class="paragraph">
<p>The binary operation <code>addition</code> or <code>+</code> can be applied to any collection of countable things. You can think of this either in terms of operating on two numbers to produce a larger number, or operating on two  piles of things to get to one bigger pile of things.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[x x x] + [x x x x] = [x x x x x x x]
3 + 4 = 7</pre>
</div>
</div>
<div class="paragraph">
<p>The addition operation over countable collections has a few interesting properties.</p>
</div>
<div class="paragraph">
<p>First, there is an <strong>identity</strong> (denoted <code>id</code>). An identity is the argument to the operation such that, when the operation is applied to <code>id</code> and a second argument <code>x</code>, the outcome is still <code>x</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>id + x = x</pre>
</div>
</div>
<div class="paragraph">
<p>For addition, the <code>id</code> is of course 0 (or the empty collection), because anything plus 0 is itself.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>3 + 0 = 3
[x x x] + [] = [x x x]</pre>
</div>
</div>
<div class="paragraph">
<p>Second, addition is <strong>associative</strong>. This means that, when you have more than two inputs that you want to apply the operation, it doesn&#8217;t matter what order you apply the operation, you&#8217;ll still end up with the same result.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>1 + 2 + 3 = 6
1 + (2 + 3) = 1 + 5 = 6
(1 + 2) + 3 = 3 + 3 = 6

a + (b + c) = (a + b) + c</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_another_level_one_abstraction_concatenation_over_sequences">Another Level One Abstraction: Concatenation over Sequences</h3>
<div class="paragraph">
<p>A sequence is a collection of things which have an explicit order, i.e. there is a first and last element. A sequence of carriages in a train is a concrete example, where the carriages are the elements, and the train is the sequence. If you change the orders of the elements (the carriages) you have changed the sequence (the train).</p>
</div>
<div class="paragraph">
<p>Another concretion is Strings, which are sequences of characters.</p>
</div>
<div class="paragraph">
<p>The operation <code>concatenate</code> or <code>++</code> is a binary operation that can operate on two sequences, joining them together 'nose to tail'. Think of taking two trains, and joining them together in one long train.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[a b] ++ [c d] = [a b c d]</pre>
</div>
</div>
<div class="paragraph">
<p>Is there an <strong>identity</strong> here too? Yes, there is the 'empty sequence' <code>[]</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[a b] ++ [] = [a b]</pre>
</div>
</div>
<div class="paragraph">
<p>Is this operation <strong>associative</strong>? Also yes</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[a b] ++ ([c d] ++ [e f]) = [a b] ++ [c d e f] = [a b c d e f]
([a b] ++ [c d]) ++ [e f] = [a b c d] ++ [e f] = [a b c d e f]</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_one_last_level_one_abstraction_merging_of_associative_collections">One Last Level One Abstraction: Merging of Associative Collections</h3>
<div class="paragraph">
<p>An associative collection is a collection of named values, called 'key-value pairs'. A dictionary (in the computer science or literal sense) is an example.</p>
</div>
<div class="paragraph">
<p>The operation <code>merge</code> or <code>&#8592;</code> is a binary operation that can operate on two associative collections, resulting in a single associative collection containing the keys of both input collections. However, if the same key exists in both the input collections, the value associated with that key in the output will be that of the <em>second</em> collection.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{a 1, b 2} &lt;- {a 3, c 4} = {a 3, b 2, c 4}</pre>
</div>
</div>
<div class="paragraph">
<p>Is there an <strong>identity</strong> here? Yes, there is the 'empty collection' <code>{}</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{a 1, b 2} &lt;- {} = {a 1, b 2}</pre>
</div>
</div>
<div class="paragraph">
<p>Is this operation <strong>associative</strong>? Also yes</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{a 1, b 2} &lt;- ({a 3, c 4} &lt;- {a 5, d 6}) = {a 1, b 2} &lt;- {a 5, c 4, d 6} = {a 5, b 2, c 4, d 6}
({a 1, b 2} &lt;- {a 3, c 4}) &lt;- {a 5, d 6} = {a 3, b 2, c 4} &lt;- {a 5, d 6} = {a 5, b 2, c 4, d 6}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_second_level_abstraction_monoid">Second Level Abstraction: Monoid</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When we were thinking about concrete things like a pile or rocks or a tray of apples, we were noticing that there were patterns where concrete examples shared similar properties, and we used that to create abstractions of information structures such as sequences or associative collections, and operations over those structures.</p>
</div>
<div class="paragraph">
<p>You will have noticed that similar patterns are emerging in the abstractions themselves - these <strong>Operation over Structure</strong> things have similar properties, namely that the pairs of Operation and Structure have an <strong>identity</strong>, and are <strong>associative</strong>.</p>
</div>
<div class="paragraph">
<p>So, just as before, we can create an abstraction, a grouping, which includes any Operation/Structure pair which has these properties.</p>
</div>
<div class="paragraph">
<p>A <strong>Monoid</strong> is a Operation/Structure pair where</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The operation (call it <code>f</code>) is binary</p>
</li>
<li>
<p>The operation has an identity element</p>
</li>
<li>
<p>The operation is associative.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Addition over collections, Concatenation over sequences, and Merge over Associative Collections are all monoids.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_pause_for_a_terminology_rethink">A pause for a terminology rethink</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s take a second to firm up on terms and notation.</p>
</div>
<div class="paragraph">
<p>We already saw that the operation in an operation/structure pair will be denoted as <code>f</code>.</p>
</div>
<div class="paragraph">
<p>A collection is a 'wrapper' around other things. Its structure, how the collection works, are separate from <em>the things or kind of things that are in the collection</em>.</p>
</div>
<div class="paragraph">
<p>An individual collection will be denoted as a contained lower case letter, <code>[a]</code>. The containment is to remind us that we are dealing in all cases with collections of things. The <code>a</code> denotes that there is something in the collection, though we don&#8217;t care what it is or how many of them there are.</p>
</div>
<div class="paragraph">
<p>The set of all collections which meet the criteria of the structure will be denoted with a capital letter, like <code>C</code>. So every individual collection <code>[s]</code> which is a sequence of elements where order matters is a member of <code>S</code>.</p>
</div>
<div class="paragraph">
<p>Note that the upper case <code>C</code> represents the <em>properties of the collection</em>, and says nothing about what is actually <em>in</em> the collection.</p>
</div>
<div class="paragraph">
<p>Sometimes we might want to specify what is in the collection, in which case we will use the notation <code>C[A]</code>, which means a collection of type C which contains things of type A. But usually we won&#8217;t bother with this.</p>
</div>
<div class="paragraph">
<p>The special element <code>id</code> is the collection that is the identity for a specific operation/structure pair.</p>
</div>
<div class="sect2">
<h3 id="_type_signatures">Type signatures</h3>
<div class="paragraph">
<p>We&#8217;ve seen individual examples so far of things like</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[1 2] ++ [3 4] = [1 2 3 4]</pre>
</div>
</div>
<div class="paragraph">
<p>Meaning that applying the operation 'concatenate' to sequence a and sequence b produces sequence c. We can generalise this idea to any operation and collection with</p>
</div>
<div class="literalblock">
<div class="content">
<pre>f([a], [b]) = [c]

where [a], [b] and [c] are all collections with the structure C</pre>
</div>
</div>
<div class="paragraph">
<p>We can further generalise to a type signature:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>f(C C) -&gt; C</pre>
</div>
</div>
<div class="paragraph">
<p>Meaning that the operation <code>f</code>, when applied to any two collections with structure <code>C</code> will produce something that is also a collection with structure <code>C</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_another_second_level_abstraction_functors">Another Second Level Abstraction: Functors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_higher_order_operations_map">Higher order operations: Map</h3>
<div class="paragraph">
<p>So far we have looked at operations that operate on two information structures. We can say the operation takes two operands as arguments.</p>
</div>
<div class="paragraph">
<p>There is also a class of operations which take <em>other operations</em> as their arguments. These are called higher order functions, HOF, and we will denote them with capital letters.</p>
</div>
<div class="paragraph">
<p>An example of a HOF is map. Map takes as its arguments</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a unary operation</p>
</li>
<li>
<p>a collection,</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and applies the unary operation to every element in the collection, producing a modified collection:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAP f [a] = [b]</pre>
</div>
</div>
<div class="paragraph">
<p>As a concrete example, consider the operation <code>add1 I &#8594; I</code>, a unary operation over Integers, which increments its integer argument.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAP add1 [1 2 3 4 5]
= [add1(1) add1(2) add1(3) add1(4) add1(5)]
= [2 3 4 5 6]</pre>
</div>
</div>
<div class="paragraph">
<p>Notice the distinct parts of this. You have one binary HOF, <code>MAP</code>, one unary operation <code>add1</code>, and one information structure, <code>C[I]</code> (a sequence which contains integers).</p>
</div>
<div class="paragraph">
<p>What does an <strong>identity</strong> look like here? It would be</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAP f [a] = [a]</pre>
</div>
</div>
<div class="paragraph">
<p>The output is the same as the input, with all the same elements.</p>
</div>
<div class="paragraph">
<p>What we essentially want is a unary operation that returns its argument:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>id(a) = a</pre>
</div>
</div>
<div class="paragraph">
<p>So yes, this has an identity.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAP id [1 2 3 4 5]
= [id(1) id(2) id(3) id(4) id(5)]
= [1 2 3 4 5]</pre>
</div>
</div>
<div class="paragraph">
<p>Another property of map is that it preserves the structure of its input - here, the output collection is still a sequence, even if the elements, or even the type of elements, within it might have changed.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAP f C[A] -&gt; C[B]</pre>
</div>
</div>
<div class="paragraph">
<p>The final important property here is the operations are composable.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAP f (MAP g [a]) = MAP (f*g) [a]</pre>
</div>
</div>
<div class="paragraph">
<p><code>f*g</code> here donates an operation that is the composition of the individual operations <code>f</code> and <code>g</code>, more explicitly <code>f(g(x))</code> - the result of applying <code>g</code> to <code>x</code>, then applying <code>f</code> to the result of that.</p>
</div>
<div class="paragraph">
<p>What the above is saying is that mapping over your input collection twice with two different operations is the same as mapping over it once, with those same two operations composed together.</p>
</div>
<div class="paragraph">
<p>To give an example, consider the operations <code>add1</code> and <code>inverse</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAP add1 [1 2 3 4 5] = [2 3 4 5 6]
MAP inverse [2 3 4 5 6]
= [1/2 1/3 1/4 1/5 1/6]

MAP (inverse*add1) [1 2 3 4 5]
= [(inverse*add1)(1) (inverse*add1)(2) (inverse*add1)(3) (inverse*add1)(4)] (inverse*add1)(5)]
= [inverse(add1(1)) inverse(add1(2)) inverse(add1(3)) inverse(add1(4)) inverse(add1(5))]
= [inverse(2) inverse(3) inverse(4) inverse(5) inverse(6)]
= [1/2 1/3 1/4 1/5 1/6]</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s recap: The HOF Map has the following properties:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The parts are the HOF, the operations <code>f</code> and a collection of structure <code>C</code>.</p>
</li>
<li>
<p>It returns a collection of structure <code>C</code> (i.e. preserves structure)</p>
</li>
<li>
<p>There is an identity operation</p>
</li>
<li>
<p>Operations are composable</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The HOF that meet this criteria are called <strong>functors</strong>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at another HOF.</p>
</div>
</div>
<div class="sect2">
<h3 id="_maybe_functor">Maybe Functor</h3>
<div class="paragraph">
<p>Consider a structure <code>B</code>. A member of the structure <code>B</code> is a collection containing 0 or 1 things. We&#8217;ll call one of these a 'box' because it&#8217;s a convenient metaphor - it&#8217;s like a box which is either empty or has one thing in it.</p>
</div>
<div class="paragraph">
<p>Our HOF here is <code>MAYBE-APPLY</code>, which takes a function <code>f</code> and a box with structure <code>B</code>. If there is something in the box, the function <code>f</code> is applied to the thing in the box. If there&#8217;s nothing in the box, it does nothing. In both cases the box is returned.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAYBE-APPLY f B -&gt; B

MAYBE-APPLY f [] = []        // the empty box
MAYBE-APPLY f [a] = [f(a)]   // the non-empty box</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s see if this is a functor.</p>
</div>
<div class="paragraph">
<p>Obviously it has the functor structure: there is a HOF, a set of operations, and a collection type.</p>
</div>
<div class="paragraph">
<p>The structure of the input collection is always maintained. A box which is either empty, or has something in it is passed in, and out the other end, there&#8217;s still a box which is either empty or has something in it.</p>
</div>
<div class="paragraph">
<p>The identity is still there:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>id a = a

MAYBE-APPLY id [] = []
MAYBE-APPLY id [a] = [a]</pre>
</div>
</div>
<div class="paragraph">
<p>Lastly, the operations are composable:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAYBE-APPLY f (MAYBE-APPLY g []) = MAYBE-APPLY f [] = []
MAYBE-APPLY (f*g) [] = []

MAYBE-APPLY f (MAYBE-APPLY g [a]) = MAYBE-APPLY f [g(a)] = [f(g(a))]
MAYBE-APPLY (f*g) [a] = [(f*g)(a)] = [f(g(a))]</pre>
</div>
</div>
<div class="paragraph">
<p>So yes, <code>MAYBE-APPLY</code> over the <code>B</code> structure is a functor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_functors_generalized">Functors, generalized</h3>
<div class="paragraph">
<p>Before we move on, lets generalize the rules of a functor <code>F</code></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Structure Preservation:</strong> <code>F f C &#8594; C</code> is the type signature</p>
</li>
<li>
<p><strong>Identity</strong> <code>F id [a] = [a]</code> for some operation <code>id</code></p>
</li>
<li>
<p><strong>Composition</strong> <code>F (f*g) [a] = F f (F g [a])</code></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_final_second_level_abstraction_monads">A final second level abstraction: Monads</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, every monad is a functor. There&#8217;s a HOF (<code>M</code>), a set of operations, and an input collection. There&#8217;s an identity, it is structure preserving, and operations are composable.</p>
</div>
<div class="paragraph">
<p>So what distinguishes a monad from a functor?</p>
</div>
<div class="paragraph">
<p>When dealing with monads, we are usually talking about not just a collection of things <code>[a]</code>, but a a <em>collection</em> of collection of things <code>[[a]]: [C]</code>. The collections must be the same. For example, it must be a list of lists of integers, or a bag of bags of candies, or a train of trains of carriages.</p>
</div>
<div class="paragraph">
<p>There are two special operations for a monad. The first operation is called the 'join', and it 'unwraps' collections of collections, so they are just collections. That is, if you have a list of list of things, applying join to them will result in just a list of things. It unwraps one 'layer' of collection.</p>
</div>
<div class="paragraph">
<p>The second is the 'return'. Return basically goes the other way - it takes the inner thing, and wraps it in the collection.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>join C[C] =&gt; C
join [[a]] = [a]

return A =&gt; C[A]
return a = [a]</pre>
</div>
</div>
<div class="paragraph">
<p>The Monad/Functor/HOF comes in when you have further levels of wrapping/unwrapping to do.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>M return [a]        // apply return to every element of [a]
= [return a]
= [[a]]

M join [[[a]]]
= [join [[a]]]
= [[a]]</pre>
</div>
</div>
<div class="paragraph">
<p>You might have notices that we seem to be changing the type signature here, which is against the rules of a functor - going from a <code>C</code> (collection) to a <code>C[C]</code> (collection of collections), and a <code>C[C[C]]</code> (collection of collection of collections) to a <code>C[C]</code>. But if you think about it, a collection of collections is also just a collection.</p>
</div>
<div class="paragraph">
<p>The identity operation is <code>(join*return)</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>M (join*return) [a]
= [(join*return) a]
= [join (return a)]
= [join [a]]
= [a]</pre>
</div>
</div>
<div class="sect2">
<h3 id="_extending_our_maybe_functor_to_be_a_maybe_monad">Extending our Maybe functor to be a Maybe Monad</h3>
<div class="paragraph">
<p>Recall that we had a functor <code>MAYBE-APPLY</code> that operated on <code>B</code> Box structures.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MAYBE-APPLY f [] = []
MAYBE-APPLY f [a] = [f(a)]</pre>
</div>
</div>
<div class="paragraph">
<p>Can we extend this functor to be a monad?</p>
</div>
<div class="paragraph">
<p>A <code>return</code> operation will 'wrap' an object in a <code>B</code>.</p>
</div>
<div class="paragraph">
<p>A join operation will <em>unwrap</em> a nested <code>B[B]</code></p>
</div>
<div class="literalblock">
<div class="content">
<pre>return a = [a]
MAYBE-APPLY return [a] = [return a] = [[a]]
MAYBE-APPLY return [] = []

join [[a]] = [a]
join [[]] = [[]]
MAYBE-APPLY join [[[a]]] = [join [[a]]] = [[a]]
MAYBE-APPLY join [[[]]] = [[[]]]</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-09-19 13:22:57 +0100
</div>
</div>
</body>
</html>