<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Domain Driven Design: The Essentials</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Domain Driven Design: The Essentials</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This article is a business-analyst focused explanation of Domain Driven Design. It does include some discussion of the concepts behind the Object Orientation, but only enough to be useful in OO modelling. Things that are too software focused (such as repositories and factories) are left out.</p>
</div>
<div class="paragraph">
<p>It it primarily based on Eric Evans' 'Domain Driven Design: Tackling Complexity in the Heart of Software', (DDD) which is the foundational text for this topic.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_ddd_is_and_why_we_use_it">What DDD is and why we use it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The craft of building enterprise software is in taking the semi-formal processes of a Business Domain, and turning that into an <em>formal</em>, unambiguous description in code. Good software is easy to change when the business processes change.</p>
</div>
<div class="paragraph">
<p>This is hard because the semi-formal processes are <em>complex</em> and <em>ambiguous</em>. It is wrong to think that the 'semi-formal' nature of these processes are a flaw, or down to laziness. It is a feature. It uses the ability of the human brain to absorb experiences over long periods and apply them to large set of input data to arrive at a decision.</p>
</div>
<div class="paragraph">
<p>This shows two reasons why the business process cannot be fully described formally:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the number of inputs which can impact the outcome are often impractically massive.</p>
</li>
<li>
<p>the processes themselves are opaque, even to those who use them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is why you see contradictions in business processes - two sets of apparently identical input data which result in a different outcome.</p>
</div>
<div class="paragraph">
<p>The problem is multiplied because business domains don&#8217;t exist in isolation. They co-exist with other domains, which share concepts but use them and think of them in subtly different ways. The domains need to share information without getting confused by these differences.</p>
</div>
<div class="paragraph">
<p>How are we supposed to build the software when a one-for-one formalization <em>literally can&#8217;t be done</em>? And when we as the software creators lack the experience that creates the mental heuristics a Domain uses?</p>
</div>
<div class="paragraph">
<p>This is the problem that Domain Driven Design attempts to solve.</p>
</div>
<div class="paragraph">
<p>It starts from the insight, evident from the above, that encoding <em>reality</em> is impossible, and so we must build a <em>model</em>. A model is a minimalist <em>distilled</em> version of the reality, which attempts to be useful for a specific purpose, not in general. That purpose is used to guide the shape of the model, and in particular what is <em>left out of it</em>.</p>
</div>
<div class="paragraph">
<p>How are we to know how to build this model, and know the places it is likely to need to change, when we don&#8217;t have the knowledge of the business Domain? By communicating constantly and effectively with the people who do have that knowledge; the Domain Experts.</p>
</div>
<div class="paragraph">
<p>These two core ideas, a distilled, targeted model and closely working with domain experts, drive all of the principles and techniques of DDD.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_map_of_ddd">A map of DDD</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DDD is about working with Domain Experts to build a model which solves a problem, then encoding that model in software. The ideas in DDD can be dividied into three parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Modelling basics</strong>. A model is a selective description of the information and behaviour of a domain. How do we actually start to build one? Here, we use the language and patterns of the <em>object paradigm</em> to describe our domain. We also introduce the most critical idea in DDD, the <em>Ubiquitous Language</em>, a dictionary of terms with strict and agreed definitions within the domain.</p>
</li>
<li>
<p><strong>Tactical design</strong>, or modelling in the small. This is about working with a single model and providing techniques to turn it into good OO code.</p>
</li>
<li>
<p><strong>Strategic design</strong>, or modelling in the large. This is about what you do when you have to work with /multiple/ domains, systems and teams - how you can effectively manage the translation from one model to another, and flow information between them without creating confusion</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modelling_and_the_ubiquitous_language">Modelling and the Ubiquitous Language</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some initial terms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <strong>Domain</strong> is an subject area in which business problems are solved</p>
</li>
<li>
<p>A <strong>Model</strong> is a rigorously organized, selective abstraction of a domain</p>
</li>
<li>
<p>A <strong>Domain Expert</strong> is someone who lives in the domain, and solves the business problems in it on a daily basis.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_working_with_domain_experts_knowledge_crunching">Working with Domain Experts: Knowledge Crunching</h3>
<div class="paragraph">
<p>You might think you understand the Domain, but unless you&#8217;ve spend years in it, you don&#8217;t. Even if you are a domain expert, you can&#8217;t just walk up to a whiteboard and write a perfect model on your first try, because the domain doesn&#8217;t live neatly in your head like that. There are subtleties and nuances which are not obvious, and which will take a long time and lots of talking to tease out.</p>
</div>
<div class="paragraph">
<p>Your first model for a domain will be naive. You may look at a mature model for the first time and think that it is clearly missing a key concept ('A model for container shipping that has no concept for a ship? Surely wrong'), and only when you understand the domain will you see why that is the case.</p>
</div>
<div class="paragraph">
<p>That suggests the method by which we tease out the model, referred to as <em>Knowledge Crunching</em>: by Tech talking to Domain Experts over the long term with a whiteboard, sketching models, running through scenarios, refining, distilling. Finding clever ways to visually express processes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_modelling_and_object_orientation">Modelling and Object Orientation</h3>
<div class="paragraph">
<p>Evans' DDD follows an <em>object oriented</em> modelling paradigm. Some of the concepts in his book are general to modelling, some are exclusive to (or at least expressed in) OO.</p>
</div>
<div class="paragraph">
<p>OO is a paradigm for writing code, and many languages (including C#, which is what we primarily use at Varde) are 'Object Oriented Languages'.</p>
</div>
<div class="paragraph">
<p>More abstractly, the object paradigm provides a language for describing the way we think about business processes. We have <em>objects</em> (say, a Fund), which consists of <em>information</em> (the Fund Name, its Launch Date), and <em>behaviors</em> or processes which that object engages in (Close Fund, Issue Capital Call, Make Distribution).</p>
</div>
<div class="paragraph">
<p>One of the main benefits of the Object Paradigm is that, if written well, it can be understood by both the Domain Experts who know the processes, and by the developers that will implement the processes in code.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll get into the specifics of how you express your model using object in the next section, modelling in the small.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_ubiquitous_language">A Ubiquitous Language</h3>
<div class="paragraph">
<p>Effective communication between developers and domain experts is crucial. A core principle of DDD is that developers and business experts must come up with the model <em>together</em>. This can be a problem because there will be a lot of words that have a specific meaning in that domain, that the devs won&#8217;t be able to guess from common English usage.</p>
</div>
<div class="paragraph">
<p>You need to get the developers and domain experts to the point where when a term is used, both sides understand the same thing from it. Literally we need to get them speaking the same language.</p>
</div>
<div class="paragraph">
<p>You do this by <em>explicitly building that dictionary of agreed terms</em> and agreeing to use it whenever you&#8217;re talking about the domain. Literally write it down somewhere. We call this the Ubiquitous Language, or UL.</p>
</div>
<div class="paragraph">
<p>You will then express the model in the Ubiquitous Language.</p>
</div>
<div class="paragraph">
<p>Both the domain expert and tech have a role in building the UL: the domain expert needs to watch out for awkward terms that don&#8217;t really 'fit' with their mental model of the domain. This is a good indication that you need to fiddle with it until it does fit.</p>
</div>
<div class="paragraph">
<p>Tech needs to watch for terms that are inconsistent or ambiguous, and work to make them less hazy.</p>
</div>
<div class="paragraph">
<p>Technology obviously has its own complex jargon, not understandable to the business users. Keep it out of the Ubiquitous Language as much as possible.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_ul_in_code">The UL in Code</h3>
<div class="paragraph">
<p>Once you have your first iteration of a model, expressed in objects, and in the Ubiquitous Language, you need to go away and code it.</p>
</div>
<div class="paragraph">
<p>It is critical that the code is written <em>in the Ubiquitous Language</em>. All the classes, all the methods, all the variable names, should be things that exist in the UL.</p>
</div>
<div class="paragraph">
<p>Not <em>everything</em> in the UL has a corresponding thing in the code - code is pretty low level, so larger structural UL concepts won&#8217;t be (though they will still be embedded in the architecture of the software, as we&#8217;ll see later)</p>
</div>
<div class="paragraph">
<p>The reason we insist on this is that if the language of the model doesn&#8217;t match the code, the Devs will stop thinking in terms of the model. The model will stop driving the development of the code, and will have lost the ability to talk to the business.</p>
</div>
</div>
<div class="sect2">
<h3 id="_documenting_the_model">Documenting the model</h3>
<div class="paragraph">
<p>Having the UL embedded in code has another benefit: the code <strong>is</strong> your low level documentation for the model. If your model changes, so does your code. So your documentation is never out of date.</p>
</div>
<div class="paragraph">
<p>The diagrams and UML you draw in your knowledge crunching sessions are not documentation - they are not a reference or a bible. Throw them away when you are done. Having things written down so others can read it is a good idea. But any attempt to have an 'always up to date' representation of your model at any real size is doomed to be abandoned and rot, introducing confusion and noise.</p>
</div>
<div class="paragraph">
<p>A good way to approach documentation of a model is to be explicit that any document is a snapshot of your thinking <em>at a point in time</em>. Date stamp it, then never touch it again. Keep these documents together, then someone just needs to start at the newest document.</p>
</div>
<div class="paragraph">
<p>Be sparing with UML. Use diagrams as inserts communicating specific things within longer-form descriptions of your models, never as a thing on its own. Keep the diagrams themselves small. Put in <em>parts</em> of your model if it&#8217;s too big to fit readably on a portrait piece of paper.</p>
</div>
<div class="paragraph">
<p>Don&#8217;t get hung up on creating 'legal' UML at the expense of clearly communicating your concept - less is more.</p>
</div>
<div class="paragraph">
<p>Remember: The UML is not the model.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modelling_your_domain_in_the_small">Modelling your domain in the small</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we talk about modelling using OO ideas, we need to talk about the building blocks we&#8217;ll use to build up our model.</p>
</div>
<div class="sect2">
<h3 id="_encoding_concepts_in_classes_modules_and_layers">Encoding concepts in Classes, Modules and Layers</h3>
<div class="sect3">
<h4 id="_classes_and_objects">Classes and Objects</h4>
<div class="paragraph">
<p>An object is a conceptual container of information and behavior we mentally group together. We might have a mental concept of a specific 'Fund', say Fund 12, which has information associated with it, such as its name, its close dates, which investors are invested in it. A fund also 'does things' which change its information and change the world around it. For example Fund 12 might hold a close, which will change the investors that are invested in it.</p>
</div>
<div class="paragraph">
<p>A <em>Class</em> can be thought of as a template for creating objects, defining the information and behavior that can be associated with it. From a class template, you can create <em>objects</em> which are specific <em>instances</em> of that class. A <em>Fund</em> Class would let you create the <em>fund 12</em> object.</p>
</div>
<div class="paragraph">
<p>A <em>Duck</em> class might be a template which has 'slots' for information about the ducks type, its color, its size etc. And It might have 'swim' behavior, 'quack' behavior and 'fly' behavior.</p>
</div>
<div class="paragraph">
<p>When I <em>instantiate</em> an object using the <em>Duck</em> class template, I might create a duck called 'Jim' with type 'Crested', color 'Blue' and size '18 inches'. I can then make jim do things by <em>calling</em> his behaviors (or <em>methods</em>), by saying <code>jim.fly()</code> or <code>jim.swim()</code>.</p>
</div>
<div class="paragraph">
<p>More abstractly, I might have a <em>Payment</em> class, which I instantiate with information date, amount, currency, from, to. I then call its <code>approvePayment()</code> method, which allows to to call the <code>makePayment</code> method, which sends the payment details to the bank.</p>
</div>
</div>
<div class="sect3">
<h4 id="_associations">Associations</h4>
<div class="paragraph">
<p>In addition to 'primitive' information, like numbers, words and dates, a class can be related to other classes. For example in our Payment class, we had slots for 'to' and 'from', which conceptually could represent the to and from Legal Entities of the Payment. These Entities could be modelled themselves as classes, with their own data and behavior.</p>
</div>
<div class="paragraph">
<p>When two classes are connected in this way, they are said to be <em>Associated</em>.</p>
</div>
<div class="paragraph">
<p>Associations have direction, which in OO loosely translates to which class 'belongs' to which. For example, our PaymentX object could hold a reference to Entity A in its 'To' slot. Alternatively, Entity A could hold a reference to all payments it&#8217;s involved in (including ours) in its 'Payments' slot.</p>
</div>
<div class="paragraph">
<p>In the former case, you can get to Entity A from PaymentX by calling <code>PaymentX.to</code>. In the latter case you can get from Entity A to PaymentX by calling <code>EntityA.payments</code>. Moving from one object to another in this way is called <em>Traversal</em>. Which way you choose to model depends on what problem you are trying to solve - will you be starting with a payment and trying to get to the entity, or starting with an entity and trying to get to its payments?</p>
</div>
<div class="paragraph">
<p>Note that while you <em>can</em> model bidirectional associations, these are rather clunky to implement in the OO paradigm, and more generally increase the complexity of the model considerably. You should try to eliminate them wherever possible, by deciding on the direction which best meets your models purpose.</p>
</div>
<div class="paragraph">
<p>Notice in the above example that a Payment would have exactly one 'To' entity, where an entity can have many payments, making this a one-to-many association. Avoid <em>many-to-many</em> associations like the plague, and try to stick to one-to-one when possible.</p>
</div>
<div class="paragraph">
<p>Generally, think hard about eliminating non-essential associations - the fewer you can get away with, the simpler your model will be.</p>
</div>
</div>
<div class="sect3">
<h4 id="_modules">Modules</h4>
<div class="paragraph">
<p>Classes are grouped together (in code) into Modules (in some languages called Namespaces). Take advantage of this opportunity to introduce structure, by making them a meaningful part of your model. Group related modules together, and make the module name something in the UL which is expressive of its intent.</p>
</div>
<div class="paragraph">
<p>If your model changes in a way that means your module contains classes that no longer belong together <em>change your modules as soon as possible</em>. They are extremely hard to change later.</p>
</div>
</div>
<div class="sect3">
<h4 id="_layered_architecture_and_the_domain_layer">Layered Architecture and the Domain Layer</h4>
<div class="paragraph">
<p>Modules are the largest concept that is usually expressed in code explicitly. But how you organize your modules, and the relationships between them, is a key aspect of keeping your program comprehensible and easy to change.</p>
</div>
<div class="paragraph">
<p>The key pattern for doing this is variously called the Layered Architecture, the Onion Architecture, the Hexagonal Architecture or the Clean Architecture. There are minor variations between them, but essentially they say the same thing: Group your modules into 'layers' with specific responsibilities, and make sure the dependencies between those layers are clearly defined and <strong>unidirectional</strong>.</p>
</div>
<div class="paragraph">
<p>A typical examples would be the following layers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A UI Layer</p>
</li>
<li>
<p>An Application layer</p>
</li>
<li>
<p>a Domain layer</p>
</li>
<li>
<p>an Infrastructure layer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The details of the Layered Architecture are beyond the scope of this article - everything we are talking about exists in the domain layer. The important takeaway is that the Domain Layer exclusively has <em>business domain logic</em> expressed in the <em>ubiquitous language</em>. All technical details (such as how to read things from a database, how the domain objects will be displayed to a user) belong in other Layers, and the Domain Layer never has to worry about them.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_types_of_object">Types of Object</h3>
<div class="sect3">
<h4 id="_encapsulation_and_identity">Encapsulation and Identity</h4>
<div class="paragraph">
<p>Grouping together information/data and behavior that together represent a 'thing' is an abstraction technique called <em>Encapsulation</em>.</p>
</div>
<div class="paragraph">
<p>Notice how when describing the Payment class, and the <code>makePayment</code> method, I didn&#8217;t say <em>how</em> the payment is sent to the bank, just that it was (the 'what').</p>
</div>
<div class="paragraph">
<p>This is the main power of objects; Once we have designed and named the object, we are free to think of a payment in our software system like we think of it in our heads, using our mental model for payments. We are freed up from thinking about low level implementation details, like transforming the payment to SWIFT format, and looking up the bank details of the 'To' entity. We can think at a higher level.</p>
</div>
<div class="paragraph">
<p>Another, more subtle benefit of objects (though more controversial one) is the ability to refer to something by its <em>identity</em>. What I mean by that is that many things change their attributes over time, but they maintain a <em>sameness</em> despite that. Our duck jim might be small and yellow when he&#8217;s born (and not able to fly), but over time he will grow larger and change color. Even though his attributes change he is the same thing, and we can still refer to him as jim.</p>
</div>
</div>
<div class="sect3">
<h4 id="_entities_aka_reference_objects">Entities, aka Reference Objects</h4>
<div class="paragraph">
<p>We use this useful <em>identity</em> property of objects to model things that have <em>life cycles</em> - and we refer to them as <em>Entities</em> or <em>reference objects</em>.</p>
</div>
<div class="paragraph">
<p>One of the key difficulties with entities is storing them. You have to be able to retrieve them - but you can&#8217;t just look it up in the database by it&#8217;s attributes, because there might be others that have the same attributes. The answer is to provide the entity with a UID - a unique identifier. Note that this UID will also be useful in talking between domains - if another domain has the concept of a payment, but models it with different attributes, then both your system and the other system will need to be able to identify the payment (i.e. agree the are talking about the same thing).</p>
</div>
<div class="paragraph">
<p>Entities can be dangerous things in OO, precisely because they can change their attributes. If you&#8217;re not careful, some other part of the system can come in and change the attributes of an Entity without you knowing about it. We&#8217;ll look at techniques for controlling for this when we talk about <em>Aggregates</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_value_objects">Value Objects</h4>
<div class="paragraph">
<p>Some things are <em>not</em> entities, and have no life cycle. They are defined entirely and uniquely by their attributes, and as long as two objects have the same attributes you can use them interchangeably (unlike Entities).</p>
</div>
<div class="paragraph">
<p>Consider how you would model <em>color</em>. Color can be described in a few ways, but one of the most common is 'RGB' - the amount of red, amount of green and amount of blue. <code>Color(113, 34, 181)</code> represents a deep purple.</p>
</div>
<div class="paragraph">
<p>Notice that you could substitute a different instance of <code>Color(113, 34, 181)</code>, and use it in place of the first one without issue. We couldn&#8217;t substitute one instance of our Payment with another with the same attributes, because it represents a different payment (i.e. it has a different identity)</p>
</div>
<div class="paragraph">
<p>Value objects have a lot of nice properties, and you should use them where possible. Often your Entity objects will have value objects embedded in them e.g. a 'CanOfPaint' entity might have some attributes defining its color. It&#8217;s usually worth thinking about extracting them out.</p>
</div>
</div>
<div class="sect3">
<h4 id="_services">Services</h4>
<div class="paragraph">
<p>Generally behavior is modelled as being part of the Entity or Value Object with which it is most closely associated.</p>
</div>
<div class="paragraph">
<p>Sometimes you will have a behavior you want to model which is /not/ closely associated with an object, or more likely, is associated with multiple objects.</p>
</div>
<div class="paragraph">
<p>Usually the right answer is <strong>not</strong> to cram it into the closest object, but instead to define it as a <em>Service</em> - a behavior not attached to an object.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modelling_your_domain_in_oo">Modelling your Domain in OO</h3>
<div class="paragraph">
<p>The point that all this has been leading to is that you can use all of the above ideas to model your domain.</p>
</div>
<div class="paragraph">
<p>Objects are a neat way to model domains because of the encapsulation property described above. You can talk to your domain experts in objects, and because you are able to use abstraction to talk in terms they are familiar with, they will understand what you are talking about.</p>
</div>
<div class="paragraph">
<p>In particular, OO has an emphasis on encapsulating <em>behavior</em> as well as data - unlike a relational model which is very much data focused. So you can use the ideas of OO to model /what is happening/ as well as what attributes something has, which is very expressive.</p>
</div>
<div class="paragraph">
<p>And then at the end of it, you&#8217;re left with something that your devs can implement fairly easily, because OO is directly translatable to code as long as you&#8217;re using an OO language.</p>
</div>
<div class="paragraph">
<p>So in practice, you&#8217;re going to get into a room with your Domain Expert and your Devs and you&#8217;re going to start putting names of concepts on a whiteboard. For us, things like 'Transaction', 'Security', 'Investor'. You&#8217;re going to think, is this something with a lifecycle? It is defined by it&#8217;s attributes, or is there a more abstract identity this represents? You&#8217;re going to start thinking about the 'nouns', or data, that live with the object - the investor name, their location. You&#8217;re going to start thinking about the 'verbs', the behaviors, associated with that investor - should I have a scheduleCall method? Does makeDistribution live here or somewhere else? What about 'inviteToConference'? And you&#8217;ll start thinking about associations with other concepts - do I need a separate class for 'contact'? Should I associate Contact with Investor, or Organization? If it&#8217;s with Organization then maybe scheduleCall doesn&#8217;t belong with Investor after all.</p>
</div>
</div>
<div class="sect2">
<h3 id="_intention_revealing_interface">Intention Revealing Interface</h3>
<div class="paragraph">
<p>The goal when do this modelling is to <em>think of really good names for things</em>, including your classes, modules, attributes and methods. Mostly you&#8217;ll be using words from the UL, but you have to use them in ways that are good descriptions of what you are trying to do. This is referred to in DDD as creating an <em>Intention Revealing Interface</em>. It&#8217;s useful both in talking to your domain expert, but also for your devs to be able to reason about the code.</p>
</div>
<div class="paragraph">
<p>This is much, <em>much</em> harder than it sounds.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aggregates">Aggregates</h3>
<div class="paragraph">
<p>I mentioned above that there is a risk that another part of the system can come in and change the attributes of objects (in software terms objects are <em>mutable</em>).</p>
</div>
<div class="paragraph">
<p>The problem with it is that we want to have <em>invariant guarantees</em> in our objects. More on them later, but for now lets say we want our system to be in a <em>valid state</em> at all times. For example lets say we set up a payment from Entity A and Entity B, so we instantiate a Payment object, linking to Entities A and B. When we did this, we checked that Entity B had a valid bank account. It did, so we were able to create the payment and send it for approval.</p>
</div>
<div class="paragraph">
<p>Now before the payment is made, something else comes along and <em>closes Entity B&#8217;s bank account</em>. Our payment object doesn&#8217;t know about it, but it has suddenly been put in an <em>invalid state</em> - trying to pay money into a bank account that doesn&#8217;t exist. What we would like our payment object to do is know that this has happened, know that it has been put in an invalid state, and cancel the payment.</p>
</div>
<div class="paragraph">
<p>Even though this mutability feature is a useful because it allows us to model <em>identity</em> and <em>lifecycle</em>, it is one of the main criticisms of OO as a paradigm, making it hard to write programs.</p>
</div>
<div class="paragraph">
<p>In DDD, <em>Aggregates</em> are used as a way to control how other parts of a system can change the attributes of objects. Basically you group a set of classes together (the Aggregate) and draw a barrier around them. Them you define an Aggregate Root: One class which acts as the gateway to all the inner classes. So anything trying to change one of the inner classes has to 'ask' the aggregate root class before it can do it.</p>
</div>
<div class="paragraph">
<p>This sounds like a purely technical-driven technique, but actually it is very useful in improving your model. It forces you to think what objects change together, which objects are most closely related to each other, and forces to remove associations which are less important, thus simplifying and distilling the model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_invariants_and_constraints">Invariants and constraints</h3>
<div class="paragraph">
<p>From the above you probably realise what an invariant is: it&#8217;s a 'check' you want to make before you do something, to make sure you&#8217;re not putting your system in an invalid state.</p>
</div>
<div class="paragraph">
<p>These are <em>business rules</em>, and thus are important things to explicitly capture in your model, the UL, and in the code. They should have names like <code>bankAccountExists?</code> (the predicate form of invariant), or <code>constrainedToCapacity</code> (the constraint form of invariant)</p>
</div>
<div class="paragraph">
<p>For the latter, think of a cargo container (<code>Container</code>) which has a business rule that it must not get loaded with more than 80% of its capacity. When instantiating the Container, you would pass it a <code>constraintedToCapacity(80%)</code> rule.</p>
</div>
<div class="paragraph">
<p>Then when you called <code>container.load(elephant)</code>, the load method would check against the <code>constraintedToCapacity</code> object: <code>content = content + constraintedToCapacity(elephant)</code>.</p>
</div>
<div class="paragraph">
<p>This is a preferable implementation to something like: <code>if content+elephant &lt; 80% then content+elephant else content</code> because the constraint is an explicit part of the model.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modelling_in_the_large_multiple_contexts">Modelling in the large: Multiple Contexts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To this point we have talked about creating a single model, which by definition will use a single, consistent Ubiquitous Language.</p>
</div>
<div class="paragraph">
<p>As you expand your scope, you will need to bring in different areas of your business. You will find that they use a different Language, using the same words to refer to slightly different things. Even though the words are the same, the data and behavior of the concept and the associations with other objects are different. The two teams have different needs from the object. In other words, they are following a different model.</p>
</div>
<div class="paragraph">
<p>The temptation of the business analyst is to try to create a single, giant model which is consistent across the entire business, to try and make a model each object so that it meets the needs of all users.</p>
</div>
<div class="paragraph">
<p>This is a very bad idea.</p>
</div>
<div class="paragraph">
<p>First, your giant model will not be comprehensible, because it is so large and because the purpose of the objects in it will lack clarity. This type of model is referred to as a 'Big Ball of Mud' (BBOM) in DDD.</p>
</div>
<div class="paragraph">
<p>Second you will lose clarity of ownership of elements of your model. Impacts of changes you make to your model in software will become unpredictable in terms of who they affect. You will struggle to make any changes at all.</p>
</div>
<div class="paragraph">
<p>Thirdly, the objects themselves will become less effective, because in order to meet the conflicting needs of multiple groups, you will have to make compromises that diminish their effectiveness for one group or another, and ultimately both.</p>
</div>
<div class="paragraph">
<p>Finally, you lose clarity of purpose of the model as a whole. Good models are aimed at being useful for solving a specific problem. When you aim to create a model that is usable generically by several teams, by definition looking to solve different problems, your model will cease to become useful.</p>
</div>
<div class="paragraph">
<p>The solution to these problems is very simple: separate things.</p>
</div>
<div class="sect2">
<h3 id="_bounded_contexts">Bounded Contexts</h3>
<div class="paragraph">
<p>We&#8217;ve talked about the Ubiquitous Language; how it contains terms that have specific meaning for a single model, within a single domain, used by a single team. You can say those terms have specific meaning within a given <em>context</em>.</p>
</div>
<div class="paragraph">
<p>When you step outside that context, the terms will have different meaning.</p>
</div>
<div class="paragraph">
<p>You can say the context is <em>bounded</em>. Within your Bounded Context, the rules of your UL (and therefore your model and code written in that UL) apply. Outside of it, when you are talking to a different business team, or about a different piece of software, they don&#8217;t. In fact at that point you are in a <em>different</em> Bounded Context, with different terms and different meanings.</p>
</div>
<div class="paragraph">
<p>These contexts always exist implicitly - you can tell when you&#8217;ve crossed one because you start to run into confusion about the definitions of terms in conversation.</p>
</div>
<div class="paragraph">
<p>When we are creating models or writing software, we should be <em>explicit</em> about the bounded context we are in. Give the Bounded Context a name ("Banking Context"), so you can talk about it, and draw it on your diagrams. The name of the bounded context itself goes into the UL.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_context_map">The Context Map</h3>
<div class="paragraph">
<p>Once we have separated our model into bounded contexts, we will need them to talk to each other. Information will have to flow from one system to another, crossing context boundaries. More conceptually you will have objects that represent the same idea (A security, a Fund, an Investment) but within different models in different BCs.</p>
</div>
<div class="paragraph">
<p>A Context Map is a diagram of all your bounded contexts, with these connections between models marked on it.</p>
</div>
<div class="paragraph">
<p>One of the benefits of doing this is that you minimize, and carefully define, the connections between bounded contexts, explicitly marking how things relate to each other, rather than the free-for-all of associations you get in a BBOM model.</p>
</div>
<div class="paragraph">
<p>You will want to <em>rigorously</em> test the things that cross boundaries.</p>
</div>
</div>
<div class="sect2">
<h3 id="_relationships_between_bounded_contexts">Relationships between Bounded Contexts</h3>

</div>
<div class="sect2">
<h3 id="_distillation_core_and_generic_subdomains">Distillation: Core and Generic subdomains</h3>

</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-08-27 14:16:05 BST
</div>
</div>
</body>
</html>